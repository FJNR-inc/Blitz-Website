<div class="register-page">
  <div class="register-page__content">
    <form (submit)="register(registerForm)" [formGroup]="registerForm">
      <div class="register-page__content__header">
        <img class="register-page__content__header__logo" src="assets/images/logo.png" alt="Logo" />
        <div>
          <h2>
            Creer un compte
          </h2>
        </div>
      </div>
      <div class="register-page__content__form">
        <div *ngFor="let error of errors" class="alert alert--danger">
          {{ error }}
        </div>
        <div class="form-group">
          <label for="firstname" class="form-label">Prenom* :</label>
          <input formControlName="first_name" type="text" id="firstname" class="form-input" />
          <div class="form-text form-text--right form-text--danger"
               *ngFor="let errorMessage of registerForm.controls['first_name'].getError('apiError')">
            {{ errorMessage }}
          </div>
        </div>
        <div class="form-group">
          <label for="lastname" class="form-label">Nom de famille* :</label>
          <input formControlName="last_name" type="text" id="lastname" class="form-input" />
          <div class="form-text form-text--right form-text--danger"
               *ngFor="let errorMessage of registerForm.controls['last_name'].getError('apiError')">
            {{ errorMessage }}
          </div>
        </div>
        <div class="form-group">
          <label for="university" class="form-label">Universite :</label>
          <select formControlName="university" id="university" class="form-input" (change)="changeUniversity()">
            <option value="none"></option>
            <option value="{{ organization.name }}" *ngFor="let organization of listOrganizations">
              {{ organization.name }}
            </option>
          </select>
          <div class="form-text form-text--right form-text--danger"
               *ngFor="let errorMessage of registerForm.controls['university'].getError('apiError')">
            {{ errorMessage }}
          </div>
        </div>
        <div class="form-group" *ngIf="selectedUniversity">
          <label for="study_level" class="form-label">Niveau d'etude :</label>
          <select formControlName="academic_level" id="study_level" class="form-input">
            <option value="none"></option>
            <option value="{{ level.name }}" *ngFor="let level of listAcademicLevels">
              {{ level.name }}
            </option>
          </select>
          <div class="form-text form-text--right form-text--danger"
               *ngFor="let errorMessage of registerForm.controls['academic_level'].getError('apiError')">
            {{ errorMessage }}
          </div>
        </div>
        <div class="form-group" *ngIf="selectedUniversity">
          <label for="study_field" class="form-label">Domaine d'etude :</label>
          <select formControlName="academic_field" id="study_field" class="form-input">
            <option value="none"></option>
            <option value="{{ field.name }}" *ngFor="let field of listAcademicFields">
              {{ field.name }}
            </option>
          </select>
          <div class="form-text form-text--right form-text--danger"
               *ngFor="let errorMessage of registerForm.controls['academic_field'].getError('apiError')">
            {{ errorMessage }}
          </div>
        </div>
        <div class="form-group">
          <label for="email" class="form-label">Courriel* :</label>
          <input formControlName="email" type="email" id="email" class="form-input" />
          <div class="form-text form-text--right form-text--danger"
               *ngFor="let errorMessage of registerForm.controls['email'].getError('apiError')">
            {{ errorMessage }}
          </div>
          <div class="alert alert--info"  *ngIf="selectedUniversity">
            Voici la liste des nom de domaines autorise pour cette universite :
            <ul>
              <li *ngFor="let domain of selectedUniversity.domains">
                {{domain.name}}
              </li>
            </ul>
          </div>
        </div>
        <div class="register-page__content__form__birthday">
          <div class="form-group register-page__content__form__birthday__item">
            <label for="birthday_day" class="form-label">Jour de naissance*:</label>
            <select formControlName="birth_day" id="birthday_day" class="form-input">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
              <option value="13">13</option>
              <option value="14">14</option>
              <option value="15">15</option>
              <option value="16">16</option>
              <option value="17">17</option>
              <option value="18">18</option>
              <option value="19">19</option>
              <option value="20">20</option>
              <option value="21">21</option>
              <option value="22">22</option>
              <option value="23">23</option>
              <option value="24">24</option>
              <option value="25">25</option>
              <option value="26">26</option>
              <option value="27">27</option>
              <option value="28">28</option>
              <option value="29">29</option>
              <option value="30">30</option>
              <option value="31">31</option>
            </select>
            <div class="form-text form-text--right form-text--danger"
                 *ngFor="let errorMessage of registerForm.controls['birth_day'].getError('apiError')">
              {{ errorMessage }}
            </div>
          </div>
          <div class="form-group register-page__content__form__birthday__item">
            <label for="birthday_month" class="form-label">Mois de naissance*:</label>
            <select formControlName="birth_month" id="birthday_month" class="form-input">
              <option value="1">Janvier</option>
              <option value="2">Fevrier</option>
              <option value="3">Mars</option>
              <option value="4">Avril</option>
              <option value="5">Mai</option>
              <option value="6">Juin</option>
              <option value="7">Juillet</option>
              <option value="8">Aout</option>
              <option value="9">Septembre</option>
              <option value="10">Octobre</option>
              <option value="11">Novembre</option>
              <option value="12">Decembre</option>
            </select>
            <div class="form-text form-text--right form-text--danger"
                 *ngFor="let errorMessage of registerForm.controls['birth_month'].getError('apiError')">
              {{ errorMessage }}
            </div>
          </div>
          <div class="form-group register-page__content__form__birthday__item">
            <label for="birthday_year" class="form-label">Annee de naissance*:</label>
            <select formControlName="birth_year" id="birthday_year" class="form-input">
              <option *ngFor="let year of years" value="{{year}}">{{year}}</option>
            </select>
            <div class="form-text form-text--right form-text--danger"
                 *ngFor="let errorMessage of registerForm.controls['birth_year'].getError('apiError')">
              {{ errorMessage }}
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="gender" class="form-label">Genre* :</label>
          <select formControlName="gender" id="gender" class="form-input">
            <option value="A">Je ne souhaite pas m'identifie</option>
            <option value="M">Homme</option>
            <option value="F">Femme</option>
            <option value="T">Trans</option>
          </select>
        </div>
        <div class="form-group">
          <label for="password" class="form-label">Mot de passe* :</label>
          <input formControlName="password" type="password" id="password" class="form-input" />
          <div class="form-text form-text--right form-text--danger"
               *ngFor="let errorMessage of registerForm.controls['password'].getError('apiError')">
            {{ errorMessage }}
          </div>
        </div>
        <div class="form-group">
          <label for="confirmation" class="form-label">Confirmation* :</label>
          <input formControlName="confirmation" type="password" id="confirmation" class="form-input" />
          <div class="form-text form-text--right form-text--danger"
               *ngFor="let errorMessage of registerForm.controls['confirmation'].getError('apiError')">
            {{ errorMessage }}
          </div>
        </div>
        <div class="form__group">
          <input formControlName="terms" type="checkbox" value="yes" id="terms" />
          <label for="terms">J’accepte les <a href="#">conditions d’utilisation.</a>*</label>
          <div class="form-text form-text--right form-text--danger"
               *ngFor="let errorMessage of registerForm.controls['terms'].getError('apiError')">
            {{ errorMessage }}
          </div>
        </div>
      </div>
      <div class="register-page__content__actions">
        <div>
          <a routerLink="/login">Se connecter</a>
        </div>
        <div>
          <button type="submit" (click)="hasSubmit=true" class="button-icon">
            <span class="button-icon__text">Creer mon compte</span>
            <span class="button-icon__icon">
              <i class="fa fa-caret-right"></i>
            </span>
          </button>
        </div>
      </div>
      <div *ngIf="!registerForm.valid && hasSubmit" class="alert alert--danger">
        Veuillez remplir tout les champs
      </div>
    </form>
  </div>
</div>
